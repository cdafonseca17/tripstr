<div>
  <div class="card-category" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url(<%= @trip.photo.present? ? @trip.photo : "https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2466&q=80"%>)">
    <h1><%= @trip.name %></h1>
</div>

  <div id="card-trip-user-show" class="text-center">
    <% @user = @trip.user %>
    <%= link_to user_path(@user) do %>
    <% @user = current_user %>
      <% if @user.photo.present? %>
        <%= cl_image_tag @user.photo, crop: :thumb, gravity: :face, class: "avatar-large-bordered" %>
      <% else %>
        <%= image_tag "no_prof_pic_present.jpg", class: "avatar-large-bordered" %>
      <% end %>
    <% end %>
  </div>
</div>

<!-- Trip information -->
<div class="d-flex justify-content-between">
  <div class="content-side" style="margin: 50px 0px 50px 50px">
    <div>
      <h3><%= @trip.name %> trip!</h3>
    </div>

    <h4>Start: <%= @trip.start_date %></h4>
     <% @steps.each do |step| %>
        <div id="step-<%= step.id %>">
        <h3><%= step.position %>. <%= step.location %></h3>

          <% step.activities.map do |activity| %>
            <h4> <%= activity.name %></h4>
            <ul>
              <li> <%= "Rating:" %> <%= activity.rating %> </li>
              <li> <%= "Type:" %> <%= activity.types.gsub("_", " ").capitalize %> </li>
              <li> <%= "Icon:" %> <%= image_tag activity.icon, {:style => "width:20px;"} %> </li>
              <li> <%= "Address:" %> <%= activity.address %></li>
              <li> <%= link_to "Visit website", activity.url %></li>

              <img class="photo-fetched" src="<%= activity.photo %>" width="250px" />




          <% end %>
          <div id="activitytypes-<%= step.id %>">

          </div>

     <% end %>
    <h4>End: <%= @trip.end_date %></h4>

  </div>

  <!-- Map on the side -->
  <div class="map-side">

<div
  style="height: 700px; width: 500px"
  id="map"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
  data-trip-cordinates="[<%= @trip.latitude %>, <%= @trip.longitude %>]"
></div>



  </div>
</div>

<p id="notice"><%= notice %></p>
<!-- <h1>Trip #<%=Trip.find(params[:id]).id%></h1> -->
<%= link_to 'Edit', edit_trip_path(@trip) %> |
<%= link_to 'Back', trips_path %>






